import{d as e,s as t,ag as a,o,b as n,ah as s,p as r,f as l,g as i,h as d,i as c,j as u,m as p,ai as v,aj as m}from"./index.0b18afc5.js";import{s as y}from"./UIModal.cd3cb185.js";import{u as b,i as g}from"./index.384d6146.js";var C=e({name:"PollGetPayRequestModal",components:{UIModal:y,Icon:t},props:{orderNo:String,tradeNo:String,type:String,visible:Boolean,getContainer:String},emits:["update:visible"],setup(e,t){const{tradeNo:r,orderNo:l,type:i,visible:d}=a(e),{clearPollGetPayResult:c,startPollGetPayResult:u}=b();return o((()=>{u({tradeNo:r.value,orderNo:l.value,commodityType:i.value})})),n((()=>{c()})),{getContainerFn:()=>e.getContainer?document.getElementById(e.getContainer):document.body,visible:d,handleOk:()=>{return e=this,a=null,o=function*(){(yield g(r.value))&&(t.emit("update:visible",!1),yield s.push(`/order/pay/result?orderNo=${l.value}&tradeNo=${r.value}&status=1&type=${i.value}`))},new Promise(((t,n)=>{var s=e=>{try{l(o.next(e))}catch(e){n(e)}},r=e=>{try{l(o.throw(e))}catch(e){n(e)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,r);l((o=o.apply(e,a)).next())}));var e,a,o},clearPollGetPayResult:c}}});const P=p("data-v-2ef1324c");r("data-v-2ef1324c");const f={class:"wrapper"},h=u("div",{class:"description"},[u("h4",{class:"description-title"},"请您在新打开的页面上完成付款！"),u("p",null,"完成付款前请不要关闭此窗口。"),u("p",null,"完成付款后请根据实际情况点击下面的按钮。")],-1);l();const N=P(((e,t,a,o,n,s)=>{const r=i("Icon"),l=i("UIModal");return d(),c(l,{title:"我要付款",visible:e.visible,"onUpdate:visible":t[1]||(t[1]=t=>e.$emit("update:visible",t)),onAfterClose:e.clearPollGetPayResult,maskClosable:!1,onOk:e.handleOk,cancelText:"选择其他方式",okText:"已完成支付",getContainer:e.getContainerFn,okButtonProps:{type:"danger"}},{default:P((()=>[u("div",f,[u(r,{class:"icon",icon:"warning"}),h])])),_:1},8,["visible","onAfterClose","onOk","getContainer"])}));C.render=N,C.__scopeId="data-v-2ef1324c";const k=({orderNo:e,tradeNo:t,type:a,getContainer:o})=>{const n=document.createElement("div");document.body.appendChild(n);const s=v({render:()=>m(C,{visible:!0,"onUpdate:visible":e=>{e||(s.unmount(n),n.remove())},orderNo:e,tradeNo:t,type:a,getContainer:o})});s.mount(n)};export{k as s};
