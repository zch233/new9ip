var e=(e,t,a)=>new Promise(((s,o)=>{var n=e=>{try{r(a.next(e))}catch(e){o(e)}},l=e=>{try{r(a.throw(e))}catch(e){o(e)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,l);r((a=a.apply(e,t)).next())}));import{d as t,s as a,r as s,ag as o,w as n,e as l,p as r,f as c,g as i,h as d,i as u,l as p,j as v,m as f,v as m,a as b,u as h,t as I,F as y,n as g}from"./index.2d5fe4a0.js";import{M as P}from"./index.19c2fe03.js";import{p as j}from"./patent.6e654615.js";import{s as k}from"./UIButton.ca857b3c.js";import{s as w}from"./UIModal.472e2844.js";import{s as x}from"./collect.acdbdaed.js";var _=t({name:"starIcon",components:{Icon:a},props:{complex:Boolean,patent:{type:Object,default:()=>({})}},setup(t,a){const r=s(!1),{patent:c}=o(t),i=s(!1);return n((()=>{i.value=c.value.collected})),{patent:c,collected:i,optionPatent:()=>e(this,null,(function*(){r.value||(r.value=!0,yield x(c.value.id).finally((()=>r.value=!1)),l.success(i.value?"已从我的收藏移除":"已加入我的收藏"),i.value=!i.value,a.emit("star",i.value))}))}}});const B=f("data-v-32bf95f6");r("data-v-32bf95f6");const U={key:0};c();const M=B(((e,t,a,s,o,n)=>{const l=i("Icon");return d(),u("div",{class:"starIcon",onClick:t[1]||(t[1]=(...t)=>e.optionPatent&&e.optionPatent(...t))},[e.complex?(d(),u("label",U,"收藏")):p("",!0),v(l,{icon:"star"+(e.collected?"_fill":"")},null,8,["icon"])])}));_.render=M,_.__scopeId="data-v-32bf95f6";var C=t({name:"PreorderButton",components:{UIButton:k,UIModal:w,Icon:a},props:{patent:{type:Object,default:()=>({})},big:Boolean},setup(t){const a=m(),o=b(),n=h(),r=s(!1);return{preorderPatent:()=>{j({days:1,productId:t.patent.id}).then((()=>e(this,null,(function*(){l.success("预留成功"),yield o.push("/user/preorder")})))).catch((e=>{r.value=!1,e.code&&3500===e.code&&P.confirm({title:"积分不足",content:"抱歉，您的剩余积分不足",okText:"立即充值",cancelText:"继续逛逛",onOk(){o.push("/vip")}})}))},visible:r,showModal:()=>{if(!a.state.user.account)return l.error("您尚未登录"),void o.push({path:"/auth/sign_in",query:{redirect:n.fullPath}});r.value=!0}}}});const O=f("data-v-26db2f22");r("data-v-26db2f22");const T=g("预留"),W={class:"wrapper"},q={class:"fontWeight"},D=g(" 将消耗 "),F={class:"fontWeight"},$=g(" 个积分，是否继续？ ");c();const z=O(((e,t,a,s,o,n)=>{const l=i("UIButton"),r=i("Icon"),c=i("UIModal");return d(),u(y,null,[v(l,{class:["preorderButton",e.big&&"big"],"customer-class":"default",onClick:e.showModal},{default:O((()=>[T])),_:1},8,["class","onClick"]),v(c,{width:416,visible:e.visible,"onUpdate:visible":t[1]||(t[1]=t=>e.visible=t),maskClosable:!1,title:"预留专利",onOk:e.preorderPatent},{default:O((()=>[v("div",W,[v(r,{class:"warning",icon:"warning"}),v("div",null,[v("p",q,"预留专利："+I(e.patent.name),1),D,v("span",F,I(e.$store.state.oneDayConsumePoints),1),$])])])),_:1},8,["visible","onOk"])],64)}));C.render=z,C.__scopeId="data-v-26db2f22";export{C as a,_ as s};
