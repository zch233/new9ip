import{d as e,s as t,r as a,af as o,o as n,b as r,ag as s,p as l,f as i,g as d,h as c,i as u,j as p,m as v,ah as m,ai as y}from"./index.c6205360.js";import{u as g,i as b}from"./index.2c475e1b.js";import{s as f}from"./UIModal.81f674b1.js";var C=e({name:"PollGetPayRequestModal",components:{UIModal:f,Icon:t},props:{orderNo:String,tradeNo:String,type:String,visible:Boolean,getContainer:String},emits:["update:visible"],setup(e,t){const l=a(!1),{tradeNo:i,orderNo:d,type:c}=o(e),{clearPollGetPayResult:u,startPollGetPayResult:p}=g();return n((()=>{p({tradeNo:i.value,orderNo:d.value,commodityType:c.value})})),r((()=>{u()})),{loading:l,getContainerFn:()=>e.getContainer?document.getElementById(e.getContainer):document.body,handleOk:()=>{return e=this,a=null,o=function*(){l.value=!0,(yield b(i.value).finally((()=>l.value=!1)))&&(t.emit("update:visible",!1),yield s.push(`/order/pay/result?orderNo=${d.value}&tradeNo=${i.value}&status=1&type=${c.value}`))},new Promise(((t,n)=>{var r=e=>{try{l(o.next(e))}catch(e){n(e)}},s=e=>{try{l(o.throw(e))}catch(e){n(e)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,s);l((o=o.apply(e,a)).next())}));var e,a,o},clearPollGetPayResult:u}}});const P=v("data-v-c1eaf7e2");l("data-v-c1eaf7e2");const h={class:"wrapper"},N=p("div",{class:"description"},[p("h4",{class:"description-title"},"请您在新打开的页面上完成付款！"),p("p",null,"完成付款前请不要关闭此窗口。"),p("p",null,"完成付款后请根据实际情况点击下面的按钮。")],-1);i();const k=P(((e,t,a,o,n,r)=>{const s=d("Icon"),l=d("UIModal");return c(),u(l,{title:"我要付款",visible:e.visible,"onUpdate:visible":t[1]||(t[1]=t=>e.$emit("update:visible",t)),onAfterClose:e.clearPollGetPayResult,maskClosable:!1,onOk:e.handleOk,cancelText:"选择其他方式",okText:"已完成支付",confirmLoading:e.loading,getContainer:e.getContainerFn,okButtonProps:{type:"danger"}},{default:P((()=>[p("div",h,[p(s,{class:"icon",icon:"warning"}),N])])),_:1},8,["visible","onAfterClose","onOk","confirmLoading","getContainer"])}));C.render=k,C.__scopeId="data-v-c1eaf7e2";const x=({orderNo:e,tradeNo:t,type:a,getContainer:o})=>{const n=document.createElement("div");document.body.appendChild(n);const r=m({render:()=>y(C,{visible:!0,"onUpdate:visible":e=>{e||(r.unmount(n),n.remove())},orderNo:e,tradeNo:t,type:a,getContainer:o})});r.mount(n)};export{x as s};
