import{d as e,s as a,r as t,ao as o,ap as n,o as r,b as s,aq as l,ar as i,p as d,f as c,h as u,i as p,j as v,k as m,q as y,as as g,at as b}from"./index.a3107ae1.js";import{s as f}from"./UIModal.65203c35.js";var C=e({name:"PollGetPayRequestModal",components:{UIModal:f,Icon:a},props:{orderNo:String,tradeNo:String,type:String,visible:Boolean,getContainer:String},emits:["update:visible"],setup(e,a){const d=t(!1),{tradeNo:c,orderNo:u,type:p}=o(e),{clearPollGetPayResult:v,startPollGetPayResult:m}=n();return r((()=>{m({tradeNo:c.value,orderNo:u.value,commodityType:p.value})})),s((()=>{v()})),{loading:d,getContainerFn:()=>e.getContainer?document.getElementById(e.getContainer):document.body,handleOk:()=>{return e=this,t=null,o=function*(){d.value=!0,(yield l(c.value).finally((()=>d.value=!1)))&&(a.emit("update:visible",!1),yield i.push(`/order/pay/result?orderNo=${u.value}&tradeNo=${c.value}&status=1&type=${p.value}`))},new Promise(((a,n)=>{var r=e=>{try{l(o.next(e))}catch(e){n(e)}},s=e=>{try{l(o.throw(e))}catch(e){n(e)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,s);l((o=o.apply(e,t)).next())}));var e,t,o},clearPollGetPayResult:v}}});const P=y("data-v-c1eaf7e2");d("data-v-c1eaf7e2");const N={class:"wrapper"},h=m("div",{class:"description"},[m("h4",{class:"description-title"},"请您在新打开的页面上完成付款！"),m("p",null,"完成付款前请不要关闭此窗口。"),m("p",null,"完成付款后请根据实际情况点击下面的按钮。")],-1);c();const k=P(((e,a,t,o,n,r)=>{const s=u("Icon"),l=u("UIModal");return p(),v(l,{title:"我要付款",visible:e.visible,"onUpdate:visible":a[1]||(a[1]=a=>e.$emit("update:visible",a)),onAfterClose:e.clearPollGetPayResult,maskClosable:!1,onOk:e.handleOk,cancelText:"选择其他方式",okText:"已完成支付",confirmLoading:e.loading,getContainer:e.getContainerFn,okButtonProps:{type:"danger"}},{default:P((()=>[m("div",N,[m(s,{class:"icon",icon:"warning"}),h])])),_:1},8,["visible","onAfterClose","onOk","confirmLoading","getContainer"])}));C.render=k,C.__scopeId="data-v-c1eaf7e2";const I=({orderNo:e,tradeNo:a,type:t,getContainer:o})=>{const n=document.createElement("div");document.body.appendChild(n);const r=g({render:()=>b(C,{visible:!0,"onUpdate:visible":e=>{e||(r.unmount(n),n.remove())},orderNo:e,tradeNo:a,type:t,getContainer:o})});r.mount(n)};export{I as s};
