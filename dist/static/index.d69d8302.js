var t=(t,e,a)=>new Promise(((s,o)=>{var n=t=>{try{r(a.next(t))}catch(t){o(t)}},l=t=>{try{r(a.throw(t))}catch(t){o(t)}},r=t=>t.done?s(t.value):Promise.resolve(t.value).then(n,l);r((a=a.apply(t,e)).next())}));import{d as e,s as a,r as s,ag as o,w as n,e as l,p as r,f as c,g as i,h as d,i as u,l as p,j as v,m as f,v as m,a as b,u as h,t as I,F as y,n as g}from"./index.0b18afc5.js";import{M as P}from"./index.8c6984b6.js";import{p as j}from"./patent.ef685016.js";import{s as k}from"./UIButton.06602d76.js";import{s as w}from"./UIModal.cd3cb185.js";import{s as x}from"./collect.d095b0f8.js";var _=e({name:"starIcon",components:{Icon:a},props:{complex:Boolean,patent:{type:Object,default:()=>({})}},setup(e,a){const r=s(!1),{patent:c}=o(e),i=s(!1);return n((()=>{i.value=c.value.collected})),{patent:c,collected:i,optionPatent:()=>t(this,null,(function*(){r.value||(r.value=!0,yield x(c.value.id).finally((()=>r.value=!1)),l.success(i.value?"已从我的收藏移除":"已加入我的收藏"),i.value=!i.value,a.emit("star",i.value))}))}}});const B=f("data-v-32bf95f6");r("data-v-32bf95f6");const U={key:0};c();const M=B(((t,e,a,s,o,n)=>{const l=i("Icon");return d(),u("div",{class:"starIcon",onClick:e[1]||(e[1]=(...e)=>t.optionPatent&&t.optionPatent(...e))},[t.complex?(d(),u("label",U,"收藏")):p("",!0),v(l,{icon:"star"+(t.collected?"_fill":"")},null,8,["icon"])])}));_.render=M,_.__scopeId="data-v-32bf95f6";var C=e({name:"PreorderButton",components:{UIButton:k,UIModal:w,Icon:a},props:{patent:{type:Object,default:()=>({})},big:Boolean},setup(e){const a=m(),o=b(),n=h(),r=s(!1);return{preorderPatent:()=>{j({days:1,productId:e.patent.id}).then((()=>t(this,null,(function*(){l.success("预留成功"),yield o.push("/user/preorder")})))).catch((t=>{r.value=!1,t.code&&3500===t.code&&P.confirm({title:"积分不足",content:"抱歉，您的剩余积分不足",okText:"立即充值",cancelText:"继续逛逛",onOk(){o.push("/vip")}})}))},visible:r,showModal:()=>{if(!a.state.user.account)return l.error("您尚未登录"),void o.push({path:"/auth/sign_in",query:{redirect:n.fullPath}});r.value=!0}}}});const O=f("data-v-26db2f22");r("data-v-26db2f22");const T=g("预留"),W={class:"wrapper"},q={class:"fontWeight"},D=g(" 将消耗 "),F={class:"fontWeight"},$=g(" 个积分，是否继续？ ");c();const z=O(((t,e,a,s,o,n)=>{const l=i("UIButton"),r=i("Icon"),c=i("UIModal");return d(),u(y,null,[v(l,{class:["preorderButton",t.big&&"big"],"customer-class":"default",onClick:t.showModal},{default:O((()=>[T])),_:1},8,["class","onClick"]),v(c,{width:416,visible:t.visible,"onUpdate:visible":e[1]||(e[1]=e=>t.visible=e),maskClosable:!1,title:"预留专利",onOk:t.preorderPatent},{default:O((()=>[v("div",W,[v(r,{class:"warning",icon:"warning"}),v("div",null,[v("p",q,"预留专利："+I(t.patent.name),1),D,v("span",F,I(t.$store.state.oneDayConsumePoints),1),$])])])),_:1},8,["visible","onOk"])],64)}));C.render=z,C.__scopeId="data-v-26db2f22";export{C as a,_ as s};
