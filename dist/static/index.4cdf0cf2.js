var a=Object.assign,e=(a,e,t)=>new Promise(((s,o)=>{var d=a=>{try{n(t.next(a))}catch(a){o(a)}},l=a=>{try{n(t.throw(a))}catch(a){o(a)}},n=a=>a.done?s(a.value):Promise.resolve(a.value).then(d,l);n((t=t.apply(a,e)).next())}));let t=document.createElement("style");t.innerHTML=".ant-form-item-label>label{color:#999}.item-label[data-v-ce962688]{color:#999;display:inline-block;text-align:right;width:4em}.info-item[data-v-ce962688]{padding:20px}.security-item[data-v-ce962688]{padding:30px}.wrapper[data-v-ce962688]{padding-left:30px;padding-bottom:30px}.headImage[data-v-ce962688]{width:80px;height:80px;-webkit-border-radius:50%;border-radius:50%;overflow:hidden}.headImage img[data-v-ce962688]{width:100%}.headImage svg[data-v-ce962688]{font-size:80px}",document.head.appendChild(t);import{a2 as s,d as o,v as d,$ as l,c as n,e as r,g as i,h as u,i as c,j as p,n as m,t as f,aT as I,m as b,s as v,r as U,p as h,f as w,F as g}from"./index.2d5fe4a0.js";import"./index.2a5bb8c2.js";import"./SearchOutlined.d20919a8.js";import"./raf.f5dd759a.js";import"./CloseOutlined.337001ad.js";import"./toString.89c3b3ed.js";import"./identity.ebd63cad.js";import"./debounce.4a39be88.js";import"./omit.5a7ef365.js";import"./_baseSlice.1123a25b.js";import"./LeftOutlined.3ebd57b3.js";import"./index.52fb0b02.js";import"./index.0df6741a.js";import"./index.19c2fe03.js";import"./_baseProperty.70166afe.js";import{s as j,a as _}from"./UIFormItem.a89e1c11.js";import{s as x,u as y}from"./index.1cee4715.js";import"./UICountdown.0b78e056.js";import{a as P,s as k}from"./UIRadio.e38537a8.js";import"./index.368c58b8.js";import"./Col.b1474ae0.js";import{s as M}from"./UIInput.ee8f6ead.js";import{s as C}from"./UIButton.ca857b3c.js";import{s as F}from"./UIModal.472e2844.js";import{a as T,s as O}from"./UITabPane.d87cba3c.js";const R=a=>s({url:"/api/v1/member",method:"put",data:a});var B=o({name:"UpdatePasswordModal",components:{UIModal:F,UIForm:j,UIFormItem:_,UIInput:M,Captcha:x},setup(t,s){const o=d(),i=l({newPassword:"",captcha:""}),u=l({captcha:[{required:!0,message:""},{len:6,message:""}],newPassword:[{required:!0,message:""}]}),{validate:c,validateInfos:p}=y(i,u);return{user:n((()=>o.getters.user)),updatePassword:()=>{c().then((()=>e(this,null,(function*(){const e=r.loading("正在更新，请稍候...");yield R(a(a({},i),{phone:o.state.user.account})).finally((()=>e())),s.emit("update:visible",!1),r.success("更新成功")}))),(()=>r.error("表单输入有误")))},passwordInfo:i,validateInfos:p}}});const S=b("data-v-575fa3c1"),L=S(((a,e,t,s,o,d)=>{const l=i("UIFormItem"),n=i("Captcha"),r=i("UIInput"),b=i("UIForm"),v=i("UIModal");return u(),c(v,{title:"修改密码",onOk:a.updatePassword,maskClosable:!1},{default:S((()=>[p(b,null,{default:S((()=>[p(l,{label:"会员帐号"},{default:S((()=>[m(f(a.user.account),1)])),_:1}),p(l,I({label:"验证码"},a.validateInfos.captcha),{default:S((()=>[p(r,{value:a.passwordInfo.captcha,"onUpdate:value":e[1]||(e[1]=e=>a.passwordInfo.captcha=e),class:"captcha",placeholder:"验证码",maxlength:6},{addonAfter:S((()=>[p(n,{member:"",info:{phone:a.user.account}},null,8,["info"])])),_:1},8,["value"])])),_:1},16),p(l,I({label:"新密码"},a.validateInfos.newPassword),{default:S((()=>[p(r,{type:"password",value:a.passwordInfo.newPassword,"onUpdate:value":e[2]||(e[2]=e=>a.passwordInfo.newPassword=e),placeholder:"请输入新密码"},null,8,["value"])])),_:1},16)])),_:1})])),_:1},8,["onOk"])}));B.render=L,B.__scopeId="data-v-575fa3c1";var V=o({name:"Setting",components:{UITabs:T,UITabPane:O,UIButton:C,UIInput:M,UIForm:j,UIFormItem:_,UIRadio:P,UIRadioGroup:k,UpdatePasswordModal:B,Icon:v},setup(){const a=d(),t=U(!1),s=l({nickname:a.state.user.nickname||"",sex:a.state.user.sex||""}),o=l({});y(s,o);const i=U(!1);return{user:n((()=>a.getters.user)),userInfo:s,updateUserInfo:()=>e(this,null,(function*(){t.value=!0;const e=r.loading("正在更新，请稍候..."),{data:o}=yield R(s).finally((()=>{t.value=!1,e()}));a.commit("COMMIT_USER",o),r.success("更新成功")})),submitLoading:t,updatePasswordModalVisible:i}}});const q=b("data-v-ce962688");h("data-v-ce962688");const E={class:"setting"},G=p("b",null,"基本信息",-1),H={class:"wrapper"},z={class:"headImage"},A=m("男"),$=m("女"),D=m("保存修改"),J=p("b",null,"帐号安全",-1),K={class:"wrapper"},N={class:"security-item"},Q=p("label",{class:"item-label"},"登录密码",-1),W=m("修改密码");w();const X=q(((a,e,t,s,o,d)=>{const l=i("Icon"),n=i("UIFormItem"),r=i("UIInput"),I=i("UIRadio"),b=i("UIRadioGroup"),v=i("UIForm"),U=i("UIButton"),h=i("UITabPane"),w=i("UITabs"),j=i("UpdatePasswordModal");return u(),c(g,null,[p("div",E,[p(w,{animated:!1},{default:q((()=>[p(h,{key:"info"},{tab:q((()=>[G])),default:q((()=>[p("div",H,[p(v,{labelCol:{span:2}},{default:q((()=>[p(n,{label:"头像"},{default:q((()=>[p("div",z,[a.user.avatar?(u(),c("img",{key:0,src:a.user.avatar,alt:""},null,8,["src"])):(u(),c(l,{key:1,icon:"defaultHeadImage"}))])])),_:1}),p(n,{label:"用户名"},{default:q((()=>[m(f(a.user.account),1)])),_:1}),p(n,{label:"昵称"},{default:q((()=>[p(r,{value:a.userInfo.nickname,"onUpdate:value":e[1]||(e[1]=e=>a.userInfo.nickname=e),placeholder:"请填写昵称"},null,8,["value"])])),_:1}),p(n,{label:"性别"},{default:q((()=>[p(b,{value:a.userInfo.sex,"onUpdate:value":e[2]||(e[2]=e=>a.userInfo.sex=e)},{default:q((()=>[p(I,{value:0},{default:q((()=>[A])),_:1}),p(I,{value:1},{default:q((()=>[$])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),p(U,{loading:a.submitLoading,onClick:a.updateUserInfo,"customer-class":"mainButton",type:"primary"},{default:q((()=>[D])),_:1},8,["loading","onClick"])])])),_:1}),p(h,{key:"security"},{tab:q((()=>[J])),default:q((()=>[p("div",K,[p("p",N,[Q,p(U,{"customer-class":"linkButton",type:"link",onClick:e[3]||(e[3]=e=>a.updatePasswordModalVisible=!0)},{default:q((()=>[W])),_:1})])])])),_:1})])),_:1})]),p(j,{visible:a.updatePasswordModalVisible,"onUpdate:visible":e[4]||(e[4]=e=>a.updatePasswordModalVisible=e)},null,8,["visible"])],64)}));V.render=X,V.__scopeId="data-v-ce962688";export default V;
