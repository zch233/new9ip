import{d as a,s as t,r as e,ag as s,w as o,e as n,p as l,f as c,g as r,h as i,i as d,l as p,j as u,m as f,v,a as m,u as b,t as I,F as h,n as g}from"./index.e0d03852.js";import{M as j}from"./index.1b896c71.js";import{p as k}from"./patent.900fdb21.js";import{s as w}from"./UIButton.5e81bc30.js";import{s as y}from"./UIModal.ff47e4f6.js";import{s as P}from"./collect.75c3a655.js";var _=a({name:"starIcon",components:{Icon:t},props:{complex:Boolean,patent:{type:Object,default:()=>({})}},setup(a,t){const l=e(!1),{patent:c}=s(a),r=e(!1);return o((()=>{r.value=c.value.collected})),{patent:c,collected:r,optionPatent:async()=>{l.value||(l.value=!0,await P(c.value.id).finally((()=>l.value=!1)),n.success(r.value?"已从我的收藏移除":"已加入我的收藏"),r.value=!r.value,t.emit("star",r.value))}}}});const x=f("data-v-32bf95f6");l("data-v-32bf95f6");const B={key:0};c();const U=x(((a,t,e,s,o,n)=>{const l=r("Icon");return i(),d("div",{class:"starIcon",onClick:t[1]||(t[1]=(...t)=>a.optionPatent&&a.optionPatent(...t))},[a.complex?(i(),d("label",B,"收藏")):p("",!0),u(l,{icon:"star"+(a.collected?"_fill":"")},null,8,["icon"])])}));_.render=U,_.__scopeId="data-v-32bf95f6";var M=a({name:"PreorderButton",components:{UIButton:w,UIModal:y,Icon:t},props:{patent:{type:Object,default:()=>({})},big:Boolean},setup(a){const t=v(),s=m(),o=b(),l=e(!1);return{preorderPatent:()=>{k({days:1,productId:a.patent.id}).then((async()=>{n.success("预留成功"),await s.push("/user/preorder")})).catch((a=>{l.value=!1,a.code&&3500===a.code&&j.confirm({title:"积分不足",content:"抱歉，您的剩余积分不足",okText:"立即充值",cancelText:"继续逛逛",onOk(){s.push("/vip")}})}))},visible:l,showModal:()=>{if(!t.state.user.account)return n.error("您尚未登录"),void s.push({path:"/auth/sign_in",query:{redirect:o.fullPath}});l.value=!0}}}});const C=f("data-v-26db2f22");l("data-v-26db2f22");const O=g("预留"),T={class:"wrapper"},W={class:"fontWeight"},q=g(" 将消耗 "),D={class:"fontWeight"},F=g(" 个积分，是否继续？ ");c();const $=C(((a,t,e,s,o,n)=>{const l=r("UIButton"),c=r("Icon"),p=r("UIModal");return i(),d(h,null,[u(l,{class:["preorderButton",a.big&&"big"],"customer-class":"default",onClick:a.showModal},{default:C((()=>[O])),_:1},8,["class","onClick"]),u(p,{width:416,visible:a.visible,"onUpdate:visible":t[1]||(t[1]=t=>a.visible=t),maskClosable:!1,title:"预留专利",onOk:a.preorderPatent},{default:C((()=>[u("div",T,[u(c,{class:"warning",icon:"warning"}),u("div",null,[u("p",W,"预留专利："+I(a.patent.name),1),q,u("span",D,I(a.$store.state.oneDayConsumePoints),1),F])])])),_:1},8,["visible","onOk"])],64)}));M.render=$,M.__scopeId="data-v-26db2f22";export{M as a,_ as s};
