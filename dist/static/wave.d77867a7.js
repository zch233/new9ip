import{d as t,E as n,G as i,H as e,W as a}from"./index.cfe7b146.js";import{w as o}from"./raf.8a2adf49.js";var r={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},s={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},d=[],c=[];function m(t,n,i){t.addEventListener(n,i,!1)}function f(t,n,i){t.removeEventListener(n,i,!1)}"undefined"!=typeof window&&"undefined"!=typeof document&&function(){var t=document.createElement("div").style;function n(n,i){for(var e in n)if(n.hasOwnProperty(e)){var a=n[e];for(var o in a)if(o in t){i.push(a[o]);break}}}"AnimationEvent"in window||(delete r.animationstart.animation,delete s.animationend.animation),"TransitionEvent"in window||(delete r.transitionstart.transition,delete s.transitionend.transition),n(r,d),n(s,c)}();var u,l=function(t,n){0!==d.length?d.forEach((function(i){m(t,i,n)})):window.setTimeout(n,0)},h=function(t,n){0!==d.length&&d.forEach((function(i){f(t,i,n)}))},v=function(t,n){0!==c.length?c.forEach((function(i){m(t,i,n)})):window.setTimeout(n,0)},E=function(t,n){0!==c.length&&c.forEach((function(i){f(t,i,n)}))};function p(t){return!t||null===t.offsetParent}var T=t({name:"Wave",props:["insertExtraNode"],setup:function(){return{configProvider:n("configProvider",i)}},mounted:function(){var t=this;e((function(){var n=a(t);1===n.nodeType&&(t.instance=t.bindAnimationEvent(n))}))},beforeUnmount:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId)},methods:{onClick:function(t,n){if(!(!t||p(t)||t.className.indexOf("-leave")>=0)){var i=this.$props.insertExtraNode;this.extraNode=document.createElement("div");var e=this.extraNode;e.className="ant-click-animating-node";var a,o=this.getAttributeName();t.removeAttribute(o),t.setAttribute(o,"true"),u=u||document.createElement("style"),!n||"#ffffff"===n||"rgb(255, 255, 255)"===n||(a=(n||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/))&&a[1]&&a[2]&&a[3]&&a[1]===a[2]&&a[2]===a[3]||/rgba\(\d*, \d*, \d*, 0\)/.test(n)||"transparent"===n||(this.csp&&this.csp.nonce&&(u.nonce=this.csp.nonce),e.style.borderColor=n,u.innerHTML="\n        [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n          --antd-wave-shadow-color: ".concat(n,";\n        }"),document.body.contains(u)||document.body.appendChild(u)),i&&t.appendChild(e),l(t,this.onTransitionStart),v(t,this.onTransitionEnd)}},onTransitionStart:function(t){if(!this._.isUnmounted){var n=a(this);t&&t.target===n&&(this.animationStart||this.resetEffect(n))}},onTransitionEnd:function(t){t&&"fadeEffect"===t.animationName&&this.resetEffect(t.target)},getAttributeName:function(){return this.$props.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"},bindAnimationEvent:function(t){var n=this;if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var i=function(i){if("INPUT"!==i.target.tagName&&!p(i.target)){n.resetEffect(t);var e=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");n.clickWaveTimeoutId=window.setTimeout((function(){return n.onClick(t,e)}),0),o.cancel(n.animationStartId),n.animationStart=!0,n.animationStartId=o((function(){n.animationStart=!1}),10)}};return t.addEventListener("click",i,!0),{cancel:function(){t.removeEventListener("click",i,!0)}}}},resetEffect:function(t){if(t&&t!==this.extraNode&&t instanceof Element){var n=this.$props.insertExtraNode,i=this.getAttributeName();t.setAttribute(i,"false"),u&&(u.innerHTML=""),n&&this.extraNode&&t.contains(this.extraNode)&&t.removeChild(this.extraNode),h(t,this.onTransitionStart),E(t,this.onTransitionEnd)}}},render:function(){var t,n,i=this.configProvider.csp;return i&&(this.csp=i),null===(n=(t=this.$slots).default)||void 0===n?void 0:n.call(t)[0]}});export{T as W};
